<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>íšŒë¡œ ì—°ê²° ê²Œì„</title>

<style>
  body {
    font-family: sans-serif;
    background: #f0f0f0;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    user-select: none;
  }
  h1 {
    margin-bottom: 12px;
    display: flex; /* h1ê³¼ ? ë²„íŠ¼ì„ ê°™ì€ ì¤„ì— ë°°ì¹˜í•˜ê¸° ìœ„í•´ flex ì‚¬ìš© */
    align-items: center;
    gap: 10px; /* h1ê³¼ ? ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
  }
  #board {
    display: grid;
    grid-template-columns: repeat(6, 60px);
    grid-template-rows: repeat(6, 60px);
    gap: 6px;
    margin-bottom: 20px;
  }
  .cell {
    width: 60px; height: 60px;
    background: white;
    border-radius: 8px;
    border: 2px solid #666;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    cursor: default;
    box-sizing: border-box;
    overflow: hidden; /* ì „ë¥˜ í‘œì‹œë¥¼ ìœ„í•´ ì¶”ê°€ */
  }
  .pipe {
    cursor: pointer;
    transition: transform 0.3s;
  }
  .V {
    font-weight: bold;
    font-size: 20px;
    color: red;
    text-align: center;
    line-height: 1.2;
    padding-top: 5px;
  }
  .R, .L {
    font-weight: bold;
    font-size: 16px;
    white-space: nowrap;
    text-align: center;
    line-height: 1.2;
    padding-top: 5px;
  }
  .R { color: #d35400; }
  .L { color: green; }

  .rotation-indicator {
    position: absolute;
    bottom: 4px;
    right: 4px;
    font-size: 10px;
    color: #888;
  }
  #message {
    font-size: 20px;
    font-weight: bold;
    color: blue;
    min-height: 30px;
  }
  /* Current flow feedback - ì „ì•• ì„¸ê¸°ì— ë”°ë¥¸ ìƒ‰ê¹” ë³€í™” */
  .cell.powered.V { background-color: #ffccbc; } /* VëŠ” ê³ ì • */
  .cell.powered.R { background-color: #ffccb2; } /* Rë„ ê³ ì • */
  
  /* ì „ì•• ë ˆë²¨ì— ë”°ë¥¸ íŒŒì´í”„/LED ìƒ‰ìƒ ë³€í™” */
  .voltage-level-5 { background-color: #ffe0b2; box-shadow: 0 0 8px #ff9100; } /* ì˜¤ë Œì§€ ë¹› */
  .voltage-level-4 { background-color: #ffecb3; box-shadow: 0 0 6px #ffbf00; } /* ì§„í•œ ë…¸ë‘ */
  .voltage-level-3 { background-color: #fff9c4; box-shadow: 0 0 4px #ffee58; } /* ì¤‘ê°„ ë…¸ë‘ */
  .voltage-level-2 { background-color: #fffde7; box-shadow: 0 0 2px #f1ecb7; } /* ì—°í•œ ë…¸ë‘ */
  .voltage-level-1 { background-color: #f8f8f8; } /* ê±°ì˜ í°ìƒ‰ */

  /* LED specific states */
  .cell.L.correct {
      background-color: #b3f7b3;
      border-color: green;
  }
  .cell.L.incorrect {
      background-color: #f7b3b3; /* ë°ì€ ë¹¨ê°• */
      border-color: red;
  }
  .button-container {
      margin-top: 20px;
  }
  button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      background-color: #007bff;
      color: white;
      margin: 0 5px;
      transition: background-color 0.2s;
  }
  button:hover {
      background-color: #0056b3;
  }

  /* ëª¨ë‹¬ ê´€ë ¨ CSS */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .modal-content {
    background-color: white;
    padding: 30px 40px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    text-align: center;
    max-width: 500px;
    width: 90%;
    position: relative;
  }

  .modal-content h2 {
    margin-top: 0;
    color: #333;
    font-size: 28px;
    margin-bottom: 20px;
  }

  .modal-content p {
    font-size: 18px;
    color: #555;
    line-height: 1.6;
    margin-bottom: 25px;
  }

  .modal-close-button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    font-size: 18px;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .modal-close-button:hover {
    background-color: #0056b3;
  }

  /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
  #startModal, #winModal, #helpModal { /* helpModalë„ ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
    display: none;
  }

  /* ë„ì›€ë§ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
  #helpButton {
    background-color: #6c757d; /* íšŒìƒ‰ ê³„ì—´ */
    color: white;
    border-radius: 50%; /* ì›í˜• */
    width: 30px;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
    line-height: 1; /* ? ê¸°í˜¸ ìˆ˜ì§ ì •ë ¬ */
  }

  #helpButton:hover {
    background-color: #5a6268;
  }
</style>
</head>
<body>
  <h1>íšŒë¡œ ì—°ê²° ê²Œì„ <div id="helpButton">?</div></h1> <div id="board"></div>
  <div id="message"></div>
  <div class="button-container">
      <button id="resetButton">ì¬ì‹œì‘</button>
  </div>

  <div id="startModal" class="modal-overlay">
    <div class="modal-content">
      <h2>ê²Œì„ ë°©ë²•</h2>
      <p>
        âš¡ï¸ <b>V</b>ì—ì„œ ì‹œì‘í•˜ëŠ” ì „ê¸°ë¥¼ <b>R</b>ì„ ì§€ë‚˜ <b>L</b>ê¹Œì§€ ì—°ê²°í•˜ì„¸ìš”.<br>
        íŒŒì´í”„ë¥¼ í´ë¦­í•˜ì—¬ íšŒì „ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
        <b>R</b>ì€ ì „ì••ì˜ ìˆ«ìë§Œí¼ ì „ê¸°ì„ ê°ì†Œì‹œí‚¤ê³ , <b>L</b>ì€ LEDì˜ ìˆ«ìì˜ ì „ì••ì—ì„œë§Œ ë¶ˆì´ ë“¤ì–´ì˜µë‹ˆë‹¤.<br>
        <b>V</b>ì™€ <b>R</b>ì˜ í•©ì´ <b>L</b>ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
        ëª¨ë“  <b>L</b>ì— ì •í™•í•œ ì „ì••ì´ ë„ë‹¬í•˜ë©´ ì„±ê³µì…ë‹ˆë‹¤!
      </p>
      </p>
      <button class="modal-close-button" id="startGameButton">ê²Œì„ ì‹œì‘!</button>
    </div>
  </div>

  <div id="winModal" class="modal-overlay">
    <div class="modal-content">
      <h2>ğŸ‰ ì„±ê³µ! ğŸ‰</h2>
      <p>ëª¨ë“  LEDì— ì •í™•í•œ ì „ì••ì´ ë„ë‹¬í–ˆìŠµë‹ˆë‹¤!</p>
      <button class="modal-close-button" id="closeWinModalButton">í™•ì¸</button>
    </div>
  </div>

  <div id="helpModal" class="modal-overlay">
    <div class="modal-content">
      <h2>ê²Œì„ ë°©ë²•</h2>
      <p>
       âš¡ï¸ <b>V</b>ì—ì„œ ì‹œì‘í•˜ëŠ” ì „ê¸°ë¥¼ <b>R</b>ì„ ì§€ë‚˜ <b>L</b>ê¹Œì§€ ì—°ê²°í•˜ì„¸ìš”.<br>
        íŒŒì´í”„ë¥¼ í´ë¦­í•˜ì—¬ íšŒì „ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
        <b>R</b>ì€ ì „ì••ì˜ ìˆ«ìë§Œí¼ ì „ê¸°ì„ ê°ì†Œì‹œí‚¤ê³ , <b>L</b>ì€ LEDì˜ ìˆ«ìì˜ ì „ì••ì—ì„œë§Œ ë¶ˆì´ ë“¤ì–´ì˜µë‹ˆë‹¤.<br>
        <b>V</b>ì™€ <b>R</b>ì˜ í•©ì´ <b>L</b>ì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
        ëª¨ë“  <b>L</b>ì— ì •í™•í•œ ì „ì••ì´ ë„ë‹¬í•˜ë©´ ì„±ê³µì…ë‹ˆë‹¤!
      </p>
      </p>
      <button class="modal-close-button" id="closeHelpModalButton">ë‹«ê¸°</button>
    </div>
  </div>

<script>
  // ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ Tì íŒŒì´í”„ë¥¼ ë‹¤ì‹œ í¬í•¨ì‹œí‚¤ê³  ë°°ì—´ ìˆ˜ì •
  const initialGrid = [
    ["V", "pipeT", "pipeLine","pipeLine" , "pipeLine", "L5"], // pipeT ë‹¤ì‹œ ì¶”ê°€
    [" ", "pipeLine", "R2", "pipeLine", "pipeCorner"," "], // pipeCorner -> ê³µë°±, pipeT -> pipeLine
    [" ", "pipeLine", "pipeCorner","pipeCorner" ,"pipeCorner" ,"L2"],
    [" ", "R1", " ", "L4", "pipeCorner" , " "],
    [" ", "pipeCorner", "pipeLine", "pipeLine", "pipeCorner", " "],
    [" ", " ", " ", " ", " ", " "]
  ];

  let currentGrid = JSON.parse(JSON.stringify(initialGrid));

  const resistors = {
    "R1": 1,
    "R2": 2
  };

  const leds = {
    "L2": 2,
    "L4": 4,
    "L5": 5
  };

  const ROWS = currentGrid.length;
  const COLS = currentGrid[0].length;

  const START_VOLTAGE = 5;

  const dirMap = [
    [-1,0], // 0: ìœ„ (Up)
    [0,1],  // 1: ì˜¤ë¥¸ìª½ (Right)
    [1,0],  // 2: ì•„ë˜ (Down)
    [0,-1]  // 3: ì™¼ìª½ (Left)
  ];

  // pipeCornerì˜ 0ë„ ê¸°ë³¸ ì—°ê²° ë°©í–¥ì„ 'ì˜¤ë¥¸ìª½, ì•„ë˜' (`â”`)ë¡œ ê³ ì •
  // pipeTë„ ë‹¤ì‹œ í¬í•¨
  // [ìœ„, ì˜¤ë¥¸ìª½, ì•„ë˜, ì™¼ìª½] ìˆœì„œ
  const pipeConnections = {
    "pipeLine": [true, false, true, false],   // ì§ì„  (ìƒí•˜)
    "pipeCorner": [false, true, true, false], // ì§ê° (0ë„ì¼ ë•Œ ì˜¤ë¥¸ìª½, ì•„ë˜ ì—°ê²° -> â” ëª¨ì–‘)
    "pipeT": [true, true, true, false],       // Tì (ìœ„,ì˜¤ë¥¸ìª½,ì•„ë˜ ì—°ê²°) - ë‹¤ì‹œ ì¶”ê°€
    "pipeCross": [true, true, true, true],    // ì‹­ì (ì „ë°©í–¥ ì—°ê²°)
  };

  let rotations = new Array(ROWS*COLS); // ê° ì…€ì˜ í˜„ì¬ íšŒì „ ìƒíƒœë¥¼ ì €ì¥

  const board = document.getElementById("board");
  const message = document.getElementById("message");
  const resetButton = document.getElementById("resetButton");

  // ì¶”ê°€ëœ DOM ìš”ì†Œ ë³€ìˆ˜
  const startGameButton = document.getElementById("startGameButton");
  const closeWinModalButton = document.getElementById("closeWinModalButton");
  const startModal = document.getElementById("startModal");
  const winModal = document.getElementById("winModal");

  // ìƒˆë¡œ ì¶”ê°€ëœ ë„ì›€ë§ ëª¨ë‹¬ ê´€ë ¨ DOM ìš”ì†Œ ë³€ìˆ˜
  const helpButton = document.getElementById("helpButton");
  const helpModal = document.getElementById("helpModal");
  const closeHelpModalButton = document.getElementById("closeHelpModalButton");


  const cells = []; // ì…€ ê°ì²´ë“¤ì„ ì €ì¥ {element, row, col, type}

  // pipeCorner ì‹¬ë³¼ì„ 'â”'ìœ¼ë¡œ ìœ ì§€í•˜ê³  pipeT ì‹¬ë³¼ë„ ë‹¤ì‹œ í¬í•¨
  // (ì´ì „ ìš”ì²­ì—ì„œ 'â”Œ'ìœ¼ë¡œ ë˜ì–´ ìˆë˜ ê²ƒì„ 'â”'ìœ¼ë¡œ ìˆ˜ì •í•˜ê³ , ì´ë²ˆ ìš”ì²­ì—ì„œëŠ” ì›ë³¸ ì½”ë“œì— ë”°ë¼ 'â”Œ'ìœ¼ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.)
  const pipeSymbols = {
    "pipeLine": "â”‚",
    "pipeCorner": "â”Œ", 
    "pipeT": "â”œ", // Tì ì‹¬ë³¼ ë‹¤ì‹œ ì¶”ê°€
    "pipeCross": "â”¼"
  };

  function createBoard() {
    board.innerHTML = '';
    cells.length = 0;

    for(let r=0; r<ROWS; r++) {
      for(let c=0; c<COLS; c++) {
        const cellType = currentGrid[r][c];
        const cell = document.createElement("div");
        cell.classList.add("cell");

        if(cellType in pipeConnections) {
          cell.classList.add("pipe");
          cell.textContent = pipeSymbols[cellType]; 

          // ì´ˆê¸° íŒŒì´í”„ë¥¼ ëœë¤í•˜ê²Œ íšŒì „
          const randomRot = Math.floor(Math.random() * 4) * 90; // 0, 90, 180, 270 ì¤‘ í•˜ë‚˜
          
          rotations[r*COLS + c] = randomRot; // ì´ˆê¸° íšŒì „ ìƒíƒœ ì„¤ì •
          cell.style.transform = `rotate(${randomRot}deg)`;

          const rotLabel = document.createElement("div");
          rotLabel.className = "rotation-indicator";
          rotLabel.textContent = randomRot + "Â°";
          cell.appendChild(rotLabel);

          cell.addEventListener("click", () => {
            const idx = r*COLS + c;
            rotations[idx] = (rotations[idx] + 90) % 360;
            cell.style.transform = `rotate(${rotations[idx]}deg)`;
            rotLabel.textContent = rotations[idx] + "Â°";
            simulateCurrentFlow(); // íšŒì „ í›„ ì „ë¥˜ íë¦„ ì‹œë®¬ë ˆì´ì…˜
          });
        } else {
          if(cellType === "V") {
            cell.classList.add("V");
            cell.textContent = `V\n(${START_VOLTAGE}V)`;
            rotations[r*COLS + c] = 0;
          } else if(cellType.startsWith("R")) {
            cell.classList.add("R");
            cell.textContent = `${cellType}\n(-${resistors[cellType]}V)`;
            rotations[r*COLS + c] = 0;
          } else if(cellType.startsWith("L")) {
            cell.classList.add("L");
            cell.textContent = `${cellType}\n(${leds[cellType]}V)`;
            rotations[r*COLS + c] = 0;
          } else {
            cell.textContent = "";
            rotations[r*COLS + c] = 0;
          }
        }

        board.appendChild(cell);
        cells.push({
          element: cell,
          row: r,
          col: c,
          type: cellType
        });
      }
    }
  }

  function rotatedConnections(connections, rotation) {
    const steps = rotation / 90;
    const result = [];
    for(let i=0; i<4; i++) {
      result[i] = connections[(i - steps + 4) % 4];
    }
    return result;
  }

  function getCellConnections(r, c) {
      const idx = r * COLS + c;
      const cellType = currentGrid[r][c];
      const rotation = rotations[idx]; // í˜„ì¬ íŒŒì´í”„ì˜ íšŒì „ ìƒíƒœ

      if (cellType in pipeConnections) {
          return rotatedConnections(pipeConnections[cellType], rotation);
      } else if (cellType === "V") {
          return [false, true,false , false]; // V ì†ŒìŠ¤ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œë§Œ ì—°ê²°í•˜ë„ë¡ ìˆ˜ì •
      } else if (cellType.startsWith("R") || cellType.startsWith("L")) {
          // ì €í•­ ë° LEDëŠ” ì‹¤ì œë¡œëŠ” íŠ¹ì • ë°©í–¥ìœ¼ë¡œë§Œ ì „ë¥˜ë¥¼ ë°›ì•„ë“¤ì´ì§€ë§Œ,
          // í˜„ì¬ ì‹œë®¬ë ˆì´ì…˜ì—ì„œëŠ” ëª¨ë“  ë°©í–¥ì—ì„œ ì—°ê²° ê°€ëŠ¥í•˜ë‹¤ê³  ê°€ì •í•˜ì—¬ íšŒë¡œ ì—°ê²°ì˜ ë³µì¡ì„±ì„ ì¤„ì„.
          return [true, true, true, true]; 
      }
      return [false, false, false, false];
  }

  // ì „ë¥˜ íë¦„ ì‹œë®¬ë ˆì´ì…˜ ë° ì •ë‹µ í™•ì¸
  function simulateCurrentFlow() {
    cells.forEach(cell => {
        // ê¸°ì¡´ powered í´ë˜ìŠ¤ ì œê±° ë° ë°°ê²½ìƒ‰ ì´ˆê¸°í™”
        cell.element.classList.remove("powered", "correct", "incorrect", 
                                       "voltage-level-1", "voltage-level-2", 
                                       "voltage-level-3", "voltage-level-4", "voltage-level-5");
        if (cell.type !== " ") {
            cell.element.style.backgroundColor = '';
            cell.element.style.boxShadow = ''; // ê·¸ë¦¼ì ì œê±°
        }
        cell.element.title = '';
    });

    const voltages = Array.from({length: ROWS}, () => Array(COLS).fill(null));
    const queue = [];

    let vPos = null;
    for(let i=0; i<cells.length; i++) {
      if(cells[i].type === "V") {
        vPos = {r: cells[i].row, c: cells[i].col};
        break;
      }
    }
    if(!vPos) {
      message.textContent = "âš ï¸ ì‹œì‘ì  Vë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
      return;
    }

    queue.push({r: vPos.r, c: vPos.c, voltage: START_VOLTAGE});
    voltages[vPos.r][vPos.c] = START_VOLTAGE;
    cells[vPos.r * COLS + vPos.c].element.classList.add("powered"); // VëŠ” í•­ìƒ powered
    // V ì…€ì— ì „ì•• ë ˆë²¨ í´ë˜ìŠ¤ ì¶”ê°€ (êµ³ì´ í•„ìš” ì—†ì§€ë§Œ ì¼ê´€ì„±ì„ ìœ„í•´)
    cells[vPos.r * COLS + vPos.c].element.classList.add(`voltage-level-${START_VOLTAGE}`);


    while(queue.length > 0) {
      const {r, c, voltage} = queue.shift();
      const currentCellIdx = r*COLS + c;
      const currentCell = cells[currentCellIdx];
      const currentCellType = currentCell.type;

      let voltageToPropagate = voltage;
      if(currentCellType.startsWith("R")) {
        const drop = resistors[currentCellType] || 0;
        voltageToPropagate = voltage - drop;
        if(voltageToPropagate < 0) voltageToPropagate = 0; // ì „ì••ì´ 0 ë¯¸ë§Œìœ¼ë¡œ ë–¨ì–´ì§€ì§€ ì•Šë„ë¡
      }

      const currentCellConnections = getCellConnections(r, c);

      for(let d=0; d<4; d++) {
        if(!currentCellConnections[d]) continue;

        const nr = r + dirMap[d][0];
        const nc = c + dirMap[d][1];

        if(nr < 0 || nr >= ROWS || nc < 0 || nc >= COLS) continue;

        const nextCellIdx = nr*COLS + nc;
        const nextCell = cells[nextCellIdx];
        const nextCellType = nextCell.type;

        if(nextCellType === " ") continue;

        const nextCellConnections = getCellConnections(nr, nc);
        const oppositeDir = (d + 2) % 4;

        if(!nextCellConnections[oppositeDir]) continue;

        // ë” ë†’ì€ ì „ì••ì´ ë„ë‹¬í•˜ê±°ë‚˜ ì²˜ìŒ ë„ë‹¬í•˜ëŠ” ê²½ìš° ì—…ë°ì´íŠ¸
        if(voltages[nr][nc] === null || voltages[nr][nc] < voltageToPropagate) {
          voltages[nr][nc] = voltageToPropagate;
          nextCell.element.classList.add("powered");
          // ì „ì•• ë ˆë²¨ì— ë”°ë¥¸ í´ë˜ìŠ¤ ì¶”ê°€
          const roundedVoltage = Math.max(0, Math.min(START_VOLTAGE, Math.round(voltageToPropagate))); // 0~5V
          nextCell.element.classList.add(`voltage-level-${roundedVoltage}`);
          queue.push({r: nr, c: nc, voltage: voltageToPropagate});
        }
      }
    }

    let allLEDsCorrect = true;
    let anyLEDExists = false;

    for(let i=0; i<cells.length; i++) {
      const cell = cells[i];
      // LED ì „ì•• í™•ì¸
      if(cell.type.startsWith("L")) {
        anyLEDExists = true;
        const requiredV = leds[cell.type] || 0;
        const gotV = voltages[cell.row][cell.col] || 0;

        cell.element.title = `ìš”êµ¬ ì „ì••: ${requiredV}V, ë„ë‹¬ ì „ì••: ${gotV}V`;

        if (gotV > 0) { // ì „ì••ì´ 0ë³´ë‹¤ ì»¤ì•¼ poweredë¡œ ê°„ì£¼
            cell.element.classList.add("powered"); 
            if(gotV === requiredV) {
                cell.element.classList.add("correct");
                cell.element.classList.remove("incorrect");
            } else {
                cell.element.classList.add("incorrect");
                cell.element.classList.remove("correct");
                allLEDsCorrect = false;
            }
        } else {
            cell.element.classList.add("incorrect");
            cell.element.classList.remove("correct");
            allLEDsCorrect = false;
        }
      }
    }

    // !!! ì •ë‹µ ì¡°ê±´: ëª¨ë“  LEDê°€ ì´ˆë¡ìƒ‰(ì •í™•í•œ ì „ì••)ì´ ë˜ë©´ ì •ë‹µ !!!
    if(allLEDsCorrect && anyLEDExists) {
      message.textContent = ""; // ê¸°ì¡´ í•˜ë‹¨ ë©”ì‹œì§€ëŠ” ì§€ìš°ê³ 
      showWinModal(); // ì„±ê³µ ëª¨ë‹¬ ë„ì›€
      message.style.color = ""; // ì´ì „ì— ì„¤ì •ëœ ìƒ‰ìƒì„ ì´ˆê¸°í™”
    } else if (anyLEDExists && vPos && !cells.some(cell => cell.type.startsWith('L') && cell.element.classList.contains('powered'))) {
        message.textContent = "íšŒë¡œê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. íŒŒì´í”„ë¥¼ ì—°ê²°í•´ì£¼ì„¸ìš”.";
        message.style.color = "orange";
    }
    else {
      message.textContent = "ğŸ’¡ ëª¨ë“  LEDì— ì •í™•í•œ ì „ì••ì´ ë„ë‹¬í•˜ë„ë¡ íŒŒì´í”„ë¥¼ ì—°ê²°í•˜ì„¸ìš”.";
      message.style.color = "red";
    }
  }

  // ëª¨ë‹¬ ì œì–´ í•¨ìˆ˜
  function showStartModal() {
    startModal.style.display = 'flex';
  }

  function hideStartModal() {
    startModal.style.display = 'none';
  }

  function showWinModal() {
    winModal.style.display = 'flex';
  }

  function hideWinModal() {
    winModal.style.display = 'none';
  }

  // ìƒˆë¡œ ì¶”ê°€ëœ ë„ì›€ë§ ëª¨ë‹¬ ì œì–´ í•¨ìˆ˜
  function showHelpModal() {
    helpModal.style.display = 'flex';
  }

  function hideHelpModal() {
    helpModal.style.display = 'none';
  }

  // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
  startGameButton.addEventListener("click", () => {
    hideStartModal();
    // ê²Œì„ ì‹œì‘ ì‹œì—ë§Œ ë³´ë“œ ìƒì„± ë° ì‹œë®¬ë ˆì´ì…˜
    createBoard(); 
    simulateCurrentFlow();
  });

  closeWinModalButton.addEventListener("click", () => {
    hideWinModal();
  });

  resetButton.addEventListener("click", () => {
    currentGrid = JSON.parse(JSON.stringify(initialGrid));
    hideWinModal(); // ì¬ì‹œì‘ ì‹œ ì„±ê³µ ë©”ì‹œì§€ ìˆ¨ê¹€
    createBoard(); 
    simulateCurrentFlow(); 
  });

  // ìƒˆë¡œ ì¶”ê°€ëœ ë„ì›€ë§ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
  helpButton.addEventListener("click", () => {
    showHelpModal(); // ? ë²„íŠ¼ í´ë¦­ ì‹œ ë„ì›€ë§ ëª¨ë‹¬ í‘œì‹œ
  });

  closeHelpModalButton.addEventListener("click", () => {
    hideHelpModal(); // ë„ì›€ë§ ëª¨ë‹¬ì˜ ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ìˆ¨ê¹€
  });

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹œì‘ ì•ˆë‚´ ëª¨ë‹¬ í‘œì‹œ
  document.addEventListener('DOMContentLoaded', showStartModal);
</script>
</body>
</html>